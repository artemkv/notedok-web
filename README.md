## NotedOK

### Disclaimer

_This is a port of a project I started back in 2013, so some code is pretty old and just moved as is. The part related to UI rendering, logic and event handling is completely reworked to align with my own proposed experimental [guidelines](https://github.com/artemkv/frontend_guidelines)._

### Note state transition diagram

![app model](note_states.png "App model")

### Most important parts

- [model.ts](src\model.ts) contains the boxes, i.e. types for each of the note states. _All the types are treated as immutable_
- [noteLifecycle.ts](src\noteLifecycle.ts) contains the arrows, i.e. all the valid state transitions. _All the functions here are pure_
- [events.ts](src\events.ts) contains the full list of events that are generated by components/commands. _All the types are treated as immutable_
- [commands.ts](src\commands.ts) contains all the commands that can be issued. _All the types are treated as immutable_
- [reducer.ts](src\reducer.ts) handles all the events by delegating actual execution to [business.ts](src\business.ts). _All the functions here are pure_
- Side effects are only allowed in commands (actual implementations of commands, for example, [storage.ts](src\commands\storage.ts))
- All the components are [almost] pure except the [SearchPanel](src\components\SearchPanel.tsx), where the state is managed locally, as an on-going experiment
- There is also some impurity due integration with a legacy autocomplete library (no time to tackle it now). Some components force focus upon first render
- Most of the components are wrapped in `memo`
- The state is managed using custom-made [useReducer.ts](src\hooks\useReducer.ts) hook

## Running the app

Development

```
npm run dev
```

Prod build:

```
npm run build
```

## TODO: Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type aware lint rules:

- Configure the top-level `parserOptions` property like this:

```js
export default tseslint.config({
  languageOptions: {
    // other options...
    parserOptions: {
      project: ["./tsconfig.node.json", "./tsconfig.app.json"],
      tsconfigRootDir: import.meta.dirname,
    },
  },
});
```

- Replace `tseslint.configs.recommended` to `tseslint.configs.recommendedTypeChecked` or `tseslint.configs.strictTypeChecked`
- Optionally add `...tseslint.configs.stylisticTypeChecked`
- Install [eslint-plugin-react](https://github.com/jsx-eslint/eslint-plugin-react) and update the config:

```js
// eslint.config.js
import react from "eslint-plugin-react";

export default tseslint.config({
  // Set the react version
  settings: { react: { version: "18.3" } },
  plugins: {
    // Add the react plugin
    react,
  },
  rules: {
    // other rules...
    // Enable its recommended rules
    ...react.configs.recommended.rules,
    ...react.configs["jsx-runtime"].rules,
  },
});
```
